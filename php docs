file structure:
```
└── 📁php
    └── 📁api
        └── 📁location
            └── add_state_city.php
            └── get_cities.php
            └── get_state_for_city.php
            └── get_states_and_cities.php
            └── get_states.php
            └── remove_state_city.php
        └── 📁rates
            └── add_rate.php
            └── delete_rate.php
            └── get_all_rates.php
            └── get_average_rates_by_state.php
            └── get_latest_rate.php
            └── get_latest_rates.php
            └── get_rates.php
            └── get_special_rates.php
            └── update_multiple_rates.php
            └── update_rate.php
        └── 📁scraper
            └── daily_update.php
            └── eggprices.php
            └── update_from_e2necc.php
    └── 📁config
        └── db.php
    └── 📁database
        └── 📁maintenance
            └── archive_old_data.php
            └── delete_old_data.php
            └── upgrade_database.php
    └── 📁seo
        └── generate_sitemap.php
    └── 📁webstories
        └── delete_old_webstories.php
        └── generate_web_stories.php
        └── generate_webstories_sitemap.php
        └── update_webstory_thumbnails.php
    └── error.log
    └── get_web_stories.php
    └── index.php
    └── php docs
    └── pricecheckROAK.php
```

 * Egg Price Application - PHP Files Documentation
 * ===============================================
 * 
 * Database Utilities
 * -----------------
 * 
 * db.php - Core database connection and helper functions
 *   - Creates database connection to MySQL server
 *   - Provides helper functions: getStateId(), getCityId(), updateEggRate()
 *   - Central utility for all normalized database operations
 * 
 * upgrade_database.php - Database upgrade script
 *   - Migrates data from original structure to normalized structure
 *   - Creates new tables and indexes for the normalized database
 *   - Populates states, cities, and egg_rates_normalized tables
 *   - Performs verification of migrated data
 * 
 * archive_old_data.php - Data archiving script
 *   - Archives egg rate data older than specified threshold (7 days)
 *   - Moves data from both original and normalized tables to archive table
 *   - Helps maintain database performance by reducing active data size
 * 
 * delete_old_data.php - Data cleanup script
 *   - Removes data older than 10 days from both database structures
 *   - Transaction-based to ensure consistent deletion
 * 
 * Data Retrieval APIs
 * -----------------
 * 
 * get_states.php - Retrieve all states
 *   - Returns JSON list of all states in the database
 *   - Used for dropdown menus and filters
 * 
 * get_cities.php - Retrieve cities for a state
 *   - Returns JSON list of cities in a specific state
 *   - Takes state parameter via GET
 *   - Used for city dropdown menus after state selection
 * 
 * get_states_and_cities.php - Retrieve all states with their cities
 *   - Returns JSON with state names as keys and arrays of cities as values
 *   - Used for populating UI components with location data
 * 
 * get_state_for_city.php - Retrieve the state for a given city
 *   - Returns the state name for a specific city
 *   - Takes city parameter via GET
 * 
 * get_special_rates.php - Retrieve special egg rates
 *   - Returns rates for cities marked with state "special"
 *   - Used for displaying special/featured rates
 * 
 * get_rates.php - Retrieve historical rates for a city
 *   - Returns historical egg rate data for a specific city and state
 *   - Takes city, state, and optional days parameters
 *   - Used for charts and history tables
 * 
 * get_latest_rates.php - Retrieve latest rates for multiple cities
 *   - Returns the most recent egg rate for each city
 *   - Can filter to specific cities if provided in POST request
 *   - Used for dashboard displays and rate comparisons
 * 
 * get_latest_rate.php - Retrieve latest rate for a specific city
 *   - Returns the most recent egg rate for a specific city and state
 *   - Takes city and state parameters via GET
 *   - Used for single city displays
 * 
 * get_all_rates.php - Retrieve all egg rates
 *   - Returns all egg rate records
 *   - Can filter by date if provided
 *   - Used for admin displays and full data exports
 * 
 * get_average_rates_by_state.php - Retrieve average rates by state
 *   - Calculates and returns average egg rates for a state over time
 *   - Takes state and optional period parameters
 *   - Used for state-level trend analysis and charts
 * 
 * Data Update APIs
 * --------------
 * 
 * add_rate.php - Add a new egg rate record
 *   - Creates a new rate entry for a city on a specific date
 *   - Updates both original and normalized tables
 *   - Takes city, state, date, and rate via POST
 * 
 * update_rate.php - Update an existing egg rate
 *   - Updates a specific egg rate record by ID
 *   - Updates both original and normalized tables
 *   - Takes id, city, state, date, and rate via POST
 * 
 * delete_rate.php - Delete an egg rate record
 *   - Removes a specific egg rate entry by ID
 *   - Deletes from both original and normalized tables
 *   - Takes id parameter via POST
 * 
 * update_multiple_rates.php - Bulk update egg rates
 *   - Updates multiple egg rate records in a single transaction
 *   - Updates both original and normalized tables
 *   - Takes array of rate objects via POST
 * 
 * add_state_city.php - Add a new state or city
 *   - Creates a new state or city entry in the database
 *   - Updates both original and normalized tables
 *   - Takes type (state/city), name, and optionally state (for cities) via POST
 * 
 * remove_state_city.php - Remove a state or city
 *   - Deletes a state or city and all associated egg rates
 *   - Updates both original and normalized tables
 *   - Takes type (state/city), name, and optionally state (for cities) via POST
 * 
 * update_from_e2necc.php - Import data from e2necc site
 *   - Fetches egg prices from the eggprices.php script
 *   - Updates the database with the latest rates
 *   - Tracks updated cities for use by daily_update.php
 * 
 * daily_update.php - Daily data update for cities
 *   - Updates egg rates for cities not updated by update_from_e2necc.php
 *   - Uses state averages or previous rates to estimate current rates
 *   - Ensures all cities have current data every day
 * 
 * eggprices.php - Scrape egg prices from e2necc.com
 *   - Scrapes egg price data from e2necc.com website
 *   - Parses HTML table and extracts rates
 *   - Maps cities to states and standardizes city names
 *   - Converts rates from paisa to rupees
 * 
 * Web Story Generation
 * ------------------
 *
 * generate_web_stories.php - Generate AMP web stories
 *   - Creates web stories for each city with latest egg rates
 *   - Uses HTML templates and dynamic data
 *   - Generates thumbnail images for each story
 *   - Creates an index page for all web stories
 * 
 * generate_webstories_sitemap.php - Generate sitemap for web stories
 *   - Creates XML sitemap of all generated web stories
 *   - Enhances SEO for web stories
 * 
 * update_webstory_thumbnails.php - Update thumbnails for web stories
 *   - Generates or updates thumbnail images for web stories
 *   - Creates consistent imagery for all city stories
 * 
 * delete_old_webstories.php - Delete outdated web stories
 *   - Removes web stories for cities with outdated rates
 *   - Maintains fresh content by removing stories older than specified days
 * 
 * generate_sitemap.php - Generate main sitemap
 *   - Creates XML and TXT sitemaps for the entire website
 *   - Includes all city pages, state pages, web stories, and static pages
 *   - Enhances SEO by providing search engines with a complete site structure
 * 
 * Deprecated/Dangerous Scripts
 * --------------------------
 * 
 * pricecheckROAK.php - DANGEROUS file deletion script
 *   - WARNING: This file has dangerous functionality to delete files
 *   - Should be removed from production immediately
 *   - Security risk that could lead to data loss