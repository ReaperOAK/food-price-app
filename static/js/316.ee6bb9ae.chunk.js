"use strict";(self.webpackChunkfood_price_app=self.webpackChunkfood_price_app||[]).push([[316],{316:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(9950),o=n(1397),a=n(4414);const c=(0,r.memo)((e=>{let{contentId:t,blogId:n,isSticky:c=!1}=e;const[l,s]=(0,r.useState)([]),[i,d]=(0,r.useState)(""),[u,b]=(0,r.useState)(window.innerWidth<768),[m,h]=(0,r.useState)(0),f=(0,r.useRef)(null),g=(0,r.useRef)(null),x=(0,r.useRef)(null),p=(0,r.useRef)(null);(0,r.useEffect)((()=>(p.current=((e,t)=>(0,o.debounce)((()=>{const n=document.getElementById(e);if(!n)return;const r=window.scrollY,o=window.innerHeight,a=Math.min(r/(n.offsetHeight-o)*100,100);t(a)}),50))(t,h),()=>{p.current&&p.current.cancel()})),[t]);const w=(0,r.useCallback)((()=>{p.current&&p.current()}),[]);(0,r.useEffect)((()=>{const e=()=>{const e=document.getElementById(t);if(!e)return;const r=e.querySelectorAll("h2, h3");r.forEach((e=>{if(!e.id){const t=e.innerText.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-");e.id="".concat(n,"-heading-").concat(t)}e.setAttribute("tabindex","0")}));const o=Array.from(r).map((e=>({id:e.id,text:e.innerText,level:"H2"===e.tagName?2:3})));s(o),f.current&&f.current.disconnect(),f.current=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&d(e.target.id)}))}),{rootMargin:"0px 0px -80% 0px",threshold:[0,.25,.5,.75,1]}),r.forEach((e=>f.current.observe(e)))};e(),g.current&&g.current.disconnect();const r=document.getElementById(t);r&&(g.current=new MutationObserver((0,o.debounce)((t=>{t.some((e=>"childList"===e.type&&(e.addedNodes.length>0||e.removedNodes.length>0)))&&setTimeout(e,100)}),100)),g.current.observe(r,{childList:!0,subtree:!0})),window.addEventListener("scroll",w);const a=(0,o.debounce)((()=>{b(window.innerWidth<768)}),150);return window.addEventListener("resize",a),()=>{f.current&&f.current.disconnect(),g.current&&g.current.disconnect(),window.removeEventListener("scroll",w),window.removeEventListener("resize",a),a.cancel()}}),[t,n,w]);const v=(0,r.useCallback)((e=>{const t=document.getElementById(e);t&&(t.focus(),window.scrollTo({top:t.offsetTop-80,behavior:"smooth"}))}),[]),y=(0,r.useCallback)((()=>{b((e=>!e))}),[]),k=(0,r.useCallback)(((e,t)=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),v(t))}),[v]);return 0===l.length?null:(0,a.jsxs)("nav",{ref:x,className:"toc-container bg-white dark:bg-gray-800 p-4 rounded-lg shadow-lg mb-6 transition-all duration-300 ease-in-out\n        ".concat(c?"lg:sticky lg:top-24":"","\n        ").concat(u?"max-h-16":"max-h-[80vh]","\n      "),"aria-label":"Table of contents",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center cursor-pointer\n          ".concat(!u&&"border-b border-gray-200 dark:border-gray-700 pb-3 mb-3"),onClick:y,onKeyDown:e=>"Enter"===e.key&&y(),tabIndex:0,role:"button","aria-expanded":!u,"aria-controls":"toc-list",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:"Table of Contents"}),(0,a.jsx)("button",{"aria-label":u?"Expand table of contents":"Collapse table of contents",className:"text-gray-600 dark:text-gray-400 hover:text-blue-600 dark:hover:text-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-500 rounded-full p-1",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 transform transition-transform duration-200 ".concat(u?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:u?"M19 9l-7 7-7-7":"M5 15l7-7 7 7"})})})]}),(0,a.jsx)("div",{className:"h-1 bg-gray-200 dark:bg-gray-700 rounded-full mt-2 mb-3",role:"progressbar","aria-valuenow":m,"aria-valuemin":"0","aria-valuemax":"100",children:(0,a.jsx)("div",{className:"h-full bg-blue-600 dark:bg-blue-500 rounded-full transition-all duration-200",style:{width:"".concat(m,"%")}})}),(0,a.jsx)("div",{id:"toc-list",className:"overflow-y-auto transition-all duration-300 ease-in-out ".concat(u?"max-h-0 opacity-0":"max-h-[calc(80vh-8rem)] opacity-100"),children:(0,a.jsx)("ul",{className:"space-y-2 mt-3",children:l.map((e=>(0,a.jsx)("li",{className:"toc-item ".concat(3===e.level?"ml-4":""),children:(0,a.jsx)("a",{href:"#".concat(e.id),onClick:t=>{t.preventDefault(),v(e.id)},onKeyDown:t=>k(t,e.id),className:"block py-1 px-2 rounded-md text-".concat(2===e.level?"md":"sm"," \n                  ").concat(i===e.id?"text-blue-600 dark:text-blue-400 font-semibold bg-blue-50 dark:bg-blue-900/20":"text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400"," transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500"),"aria-current":i===e.id?"location":void 0,children:e.text})},e.id)))})})]})}));c.displayName="TableOfContents";const l=c}}]);