"use strict";(self.webpackChunkfood_price_app=self.webpackChunkfood_price_app||[]).push([[657],{47:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var a=s(9950),r=s(8429),o=s(5467),n=s(6846),l=s(2772),i=s(5530),c=s(4414);const d=()=>{const{slug:e}=(0,r.g)(),t=(0,r.Zp)(),[s,d]=(0,a.useState)(!0),[g,x]=(0,a.useState)(null),[m,u]=(0,a.useState)(""),[f,h]=(0,a.useState)(""),[p,y]=(0,a.useState)(null),j=(0,a.useCallback)((async()=>{try{d(!0);const t=(await(0,i._e)()).find((t=>t.slug===e));if(!t)throw new Error("Story not found");y(t),h(t.city),u(t.state),await(0,i.oi)(e)}catch(t){x(t.message||"Failed to load web story")}finally{d(!1)}}),[e]);return(0,a.useEffect)((()=>{j()}),[j]),(0,c.jsxs)("div",s?{className:"bg-gray-50 min-h-screen flex flex-col",role:"alert","aria-busy":"true",children:[(0,c.jsx)(o.A,{selectedState:m,setSelectedState:u,setSelectedCity:h,selectedCity:f}),(0,c.jsx)("div",{className:"container mx-auto p-6 flex-grow flex items-center justify-center",children:(0,c.jsxs)("div",{className:"flex flex-col items-center",children:[(0,c.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-600",role:"progressbar","aria-label":"Loading web story"}),(0,c.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading web story..."})]})}),(0,c.jsx)(n.default,{})]}:g?{className:"bg-gray-50 min-h-screen flex flex-col",role:"alert",children:[(0,c.jsx)(o.A,{selectedState:m,setSelectedState:u,setSelectedCity:h,selectedCity:f}),(0,c.jsx)("div",{className:"container mx-auto p-6 flex-grow",children:(0,c.jsx)("div",{className:"max-w-lg mx-auto bg-white rounded-lg shadow-lg overflow-hidden",children:(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsxs)("div",{className:"flex items-center text-red-600 mb-4",children:[(0,c.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,c.jsx)("h2",{className:"text-xl font-semibold",children:"Error Loading Web Story"})]}),(0,c.jsx)("p",{className:"text-gray-600 mb-6",children:g}),(0,c.jsxs)("div",{className:"flex gap-4",children:[(0,c.jsx)("button",{onClick:()=>t("/webstories"),className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200",children:"Back to Web Stories"}),(0,c.jsx)("button",{onClick:()=>j(),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-200",children:"Try Again"})]})]})})}),(0,c.jsx)(n.default,{})]}:{className:"bg-gray-50 min-h-screen flex flex-col",children:[(()=>{if(p){const e="Current egg rate in ".concat(p.city,", ").concat(p.state,": \u20b9").concat(p.rate," (Updated: ").concat(p.date,")"),t="https://todayeggrates.com/webstory/".concat(p.slug);return(0,c.jsxs)(l.m,{children:[(0,c.jsx)("title",{children:"".concat(p.title," - Today Egg Rates")}),(0,c.jsx)("meta",{name:"description",content:"View the latest egg rates in ".concat(p.city,", ").concat(p.state,". Current price: \u20b9").concat(p.rate," per egg (Updated: ").concat(p.date,")")}),(0,c.jsx)("link",{rel:"canonical",href:t}),(0,c.jsx)("meta",{property:"og:title",content:p.title}),(0,c.jsx)("meta",{property:"og:description",content:e}),(0,c.jsx)("meta",{property:"og:image",content:"https://todayeggrates.com".concat(p.thumbnail)}),(0,c.jsx)("meta",{property:"og:url",content:t}),(0,c.jsx)("meta",{property:"og:type",content:"article"}),(0,c.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,c.jsx)("meta",{name:"twitter:title",content:p.title}),(0,c.jsx)("meta",{name:"twitter:description",content:e}),(0,c.jsx)("meta",{name:"twitter:image",content:"https://todayeggrates.com".concat(p.thumbnail)})]})}return null})(),(0,c.jsx)(o.A,{selectedState:m,setSelectedState:u,setSelectedCity:h,selectedCity:f}),(0,c.jsx)("div",{className:"flex-grow relative w-full",style:{height:"calc(100vh - 144px)"},children:(0,c.jsx)("iframe",{src:"/webstories/".concat(e,".html"),title:p?p.title:"Web Story - ".concat(e),className:"w-full h-full absolute inset-0 border-none",allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups allow-forms allow-presentation",loading:"eager"})}),(0,c.jsx)("div",{className:"bg-white shadow-md border-t border-gray-100",children:(0,c.jsxs)("div",{className:"container mx-auto px-4 py-3 flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,c.jsxs)("button",{onClick:()=>t("/webstories"),className:"w-full sm:w-auto px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 active:bg-indigo-800 transition-colors duration-200 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[(0,c.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to All Web Stories"]}),p&&(0,c.jsxs)("div",{className:"text-center sm:text-right",children:[(0,c.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",p.rate," ",(0,c.jsx)("span",{className:"text-base font-normal text-gray-600",children:"per egg"})]}),(0,c.jsxs)("p",{className:"text-sm text-gray-600",children:["Last updated: ",p.date]})]})]})}),(0,c.jsx)(n.default,{})]})}}}]);