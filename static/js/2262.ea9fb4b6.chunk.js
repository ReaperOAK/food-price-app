"use strict";(self.webpackChunkfood_price_app=self.webpackChunkfood_price_app||[]).push([[2262],{2262:(t,e,i)=>{i.d(e,{A:()=>n});var o=i(5371);const n=class{constructor(){this.seoEngine=new o.Ci,this.watchInterval=null,this.lastProcessedTime=null,this.processingQueue=[],this.isProcessing=!1}async startMonitoring(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;await this.seoEngine.initialize(),await this.processAllReports(),this.watchInterval=setInterval((async()=>{await this.processAllReports()}),60*t*1e3)}stopMonitoring(){this.watchInterval&&(clearInterval(this.watchInterval),this.watchInterval=null)}async processAllReports(){if(!this.isProcessing){this.isProcessing=!0;try{await this.seoEngine.initialize();const t=this.seoEngine.getOptimizations();await this.applyAutomaticOptimizations(t),await this.updateSEODatabase(t),this.lastProcessedTime=new Date}catch(t){}finally{this.isProcessing=!1}}}async applyAutomaticOptimizations(t){const e=[];if(t.lowCTRPages)for(const i of t.lowCTRPages.slice(0,5))e.push(this.optimizePageMetaTags(i));if(t.contentGaps)for(const i of t.contentGaps.slice(0,3))e.push(this.createContentForKeyword(i));if(t.emergingKeywords)for(const i of t.emergingKeywords.slice(0,5))e.push(this.optimizeForEmergingKeyword(i));if(t.internationalOpportunities)for(const i of t.internationalOpportunities.slice(0,3))e.push(this.optimizeForInternationalMarket(i));await Promise.all(e)}async optimizePageMetaTags(t){try{const e=this.extractPageType(t.page),i=this.extractLocation(t.page),o=this.seoEngine.generateMetaTags(e,i);await this.storeSEOOptimization({type:"meta_tags",page:t.page,optimization:o,reason:"Low CTR: ".concat(t.ctr.toFixed(2),"% with ").concat(t.impressions," impressions"),priority:t.optimizationPotential>1e3?"high":"medium"})}catch(e){}}async createContentForKeyword(t){try{const e={keyword:t.keyword,suggestedURL:t.suggestedPage,contentType:this.determineContentType(t.keyword),targetLength:this.calculateTargetLength(t.impressions),keywordDensity:this.calculateOptimalDensity(t.keyword),relatedKeywords:await this.findRelatedKeywords(t.keyword)};await this.storeSEOOptimization({type:"content_creation",keyword:t.keyword,optimization:e,reason:"Content gap: ".concat(t.impressions," impressions, position ").concat(t.position),priority:"high"})}catch(e){}}async optimizeForEmergingKeyword(t){try{const e={keyword:t.keyword,currentPosition:t.position,targetPosition:Math.max(1,t.position-3),optimizationActions:["Add keyword to title tag","Include in H1 and H2 headings","Increase keyword density to 1-2%","Add to meta description","Create internal links with keyword anchor text"],expectedImprovement:this.calculateExpectedImprovement(t)};await this.storeSEOOptimization({type:"keyword_optimization",keyword:t.keyword,optimization:e,reason:"Emerging keyword with ".concat(t.impressions," impressions at position ").concat(t.position.toFixed(1)),priority:"medium"})}catch(e){}}async optimizeForInternationalMarket(t){try{const e={country:t.country,currentMetrics:{clicks:t.clicks,impressions:t.impressions,ctr:t.ctr,position:t.position},optimizations:["Add hreflang tags for country","Include local currency conversions","Add country-specific content sections","Optimize for local search terms","Add timezone-aware content"],targetIncrease:"25% CTR improvement"};await this.storeSEOOptimization({type:"international_optimization",country:t.country,optimization:e,reason:"International opportunity: ".concat(t.clicks," clicks from ").concat(t.country),priority:"medium"})}catch(e){}}async updateSEODatabase(t){try{var e,i,o,n,s,a;return{timestamp:(new Date).toISOString(),totalKeywords:(null===(e=t.topKeywords)||void 0===e?void 0:e.length)||0,optimizationOpportunities:((null===(i=t.lowCTRPages)||void 0===i?void 0:i.length)||0)+((null===(o=t.contentGaps)||void 0===o?void 0:o.length)||0),internationalMarkets:(null===(n=t.internationalOpportunities)||void 0===n?void 0:n.length)||0,emergingKeywords:(null===(s=t.emergingKeywords)||void 0===s?void 0:s.length)||0,topPerformingKeywords:(null===(a=t.topKeywords)||void 0===a?void 0:a.slice(0,10))||[],actionableInsights:await this.generateActionableInsights(t)}}catch(r){}}async generateActionableInsights(t){var e;const i=[];if(null!==(e=t.deviceOptimizations)&&void 0!==e&&e.recommendations&&t.deviceOptimizations.recommendations.forEach((t=>{i.push({type:"device_performance",priority:t.priority,action:t.action,impact:"medium"})})),t.emergingKeywords){const e=t.emergingKeywords.slice(0,5).map((t=>({type:"keyword_opportunity",priority:"high",action:'Optimize for "'.concat(t.keyword,'" currently at position ').concat(t.position.toFixed(1)),impact:"high"})));i.push(...e)}if(t.contentGaps){const e=t.contentGaps.slice(0,3).map((t=>({type:"content_gap",priority:"high",action:'Create content for "'.concat(t.keyword,'" (').concat(t.impressions," impressions)"),impact:"high"})));i.push(...e)}return i}async storeSEOOptimization(t){}extractPageType(t){return t.includes("/rates")?"rates":t.includes("/city")||t.includes("/state")?"city":t.includes("/latest")?"latest":"home"}extractLocation(t){const e=t.match(/\/(city|state)\/([^/]+)/);return e?e[2].replace(/-/g," "):null}determineContentType(t){return t.includes("rate")||t.includes("price")?"rates_page":t.includes("today")||t.includes("latest")?"news_page":t.includes("trend")||t.includes("analysis")?"analysis_page":"informational_page"}calculateTargetLength(t){return t>1e3?"1500-2000 words":t>500?"1000-1500 words":"800-1200 words"}calculateOptimalDensity(t){const e=t.split(" ").length;return e>3?"0.8-1.2%":e>1?"1.0-1.5%":"1.2-2.0%"}async findRelatedKeywords(t){const e=[];return t.includes("egg")&&e.push("poultry rates","chicken prices","farm fresh eggs"),t.includes("rate")&&e.push("price","cost","market rate"),e}calculateExpectedImprovement(t){const e=Math.max(0,t.position-5);return{positionImprovement:e,additionalClicks:Math.round(.02*t.impressions*e),timeframe:"2-4 weeks"}}getStatus(){return{isProcessing:this.isProcessing,isMonitoring:null!==this.watchInterval,lastProcessedTime:this.lastProcessedTime,queueLength:this.processingQueue.length}}async forceProcess(){await this.processAllReports()}}}}]);