{"version":3,"file":"static/js/rate-table.718af972.chunk.js","mappings":"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","sources":["components/rates/RateTable.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useMemo, memo } from 'react';\n\nconst RateTable = ({ \n  rates = [], \n  itemsPerPage = 10, \n  showAdmin = false,\n  onDelete,\n  onEdit,\n  handleSort: externalHandleSort,\n  showState = false,\n  showDate = false,\n  showPriceColumns = true,\n  selectedCity = '',\n  selectedState = '',\n}) => {\n  // State management\n  const [currentPage, setCurrentPage] = useState(1);\n  const [sortConfig, setSortConfig] = useState({ key: 'city', direction: 'ascending' });\n  const [isTableVisible, setIsTableVisible] = useState(false);\n\n  // Sort handler\n  const handleSort = useCallback((key) => {\n    if (externalHandleSort) {\n      externalHandleSort(key);\n      return;\n    }\n    setSortConfig((prevConfig) => ({\n      key,\n      direction: prevConfig.key === key && prevConfig.direction === 'ascending' ? 'descending' : 'ascending'\n    }));\n  }, [externalHandleSort]);\n\n  // Sort rates with memoization\n  const sortedRates = useMemo(() => {\n    if (externalHandleSort) return rates;\n    \n    return [...rates].sort((a, b) => {\n      const aVal = a[sortConfig.key];\n      const bVal = b[sortConfig.key];\n      \n      if (sortConfig.direction === 'ascending') {\n        return aVal < bVal ? -1 : aVal > bVal ? 1 : 0;\n      }\n      return aVal > bVal ? -1 : aVal < bVal ? 1 : 0;\n    });\n  }, [rates, sortConfig, externalHandleSort]);\n\n  // Event handlers\n  const handlePageClick = useCallback((pageNumber) => {\n    setCurrentPage(pageNumber);\n  }, []);\n\n  // Pagination calculation\n  const totalPages = Math.ceil((rates?.length || 0) / itemsPerPage);\n  const indexOfLastItem = currentPage * itemsPerPage;\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\n  const currentItems = sortedRates.slice(indexOfFirstItem, indexOfLastItem);\n\n  // Hook to handle intersection observer\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsTableVisible(true);\n          observer.disconnect();\n        }\n      },\n      { threshold: 0.1 }\n    );\n\n    const tableContainer = document.querySelector('.rate-table-container');\n    if (tableContainer) {\n      observer.observe(tableContainer);\n    }\n\n    return () => observer.disconnect();\n  }, []);\n\n  // Generate pagination controls\n  const renderPaginationControls = useCallback(() => {\n    const pages = [];\n    for (let i = 1; i <= totalPages; i++) {\n      pages.push(\n        <button\n          key={i}\n          onClick={() => handlePageClick(i)}\n          className={`px-3 py-1 mx-1 rounded ${\n            currentPage === i\n              ? 'bg-blue-600 text-white'\n              : 'bg-gray-200 hover:bg-gray-300'\n          }`}\n          aria-label={`Page ${i}`}\n        >\n          {i}\n        </button>\n      );\n    }\n    return pages;\n  }, [currentPage, totalPages, handlePageClick]);\n\n  // SEO structured data\n  const generateStructuredData = useCallback(() => {\n    if (!selectedCity) return null;\n\n    const localBusinessSchema = {\n      \"@context\": \"https://schema.org\",\n      \"@type\": \"LocalBusiness\",\n      \"name\": `Egg Market ${selectedCity}`,\n      \"description\": `Find today's egg rates in ${selectedCity}, ${selectedState}. Updated daily NECC egg prices and wholesale egg rates.`,\n      \"address\": {\n        \"@type\": \"PostalAddress\",\n        \"addressLocality\": selectedCity,\n        \"addressRegion\": selectedState,\n        \"addressCountry\": \"IN\"\n      },\n      \"url\": `https://todayeggrates.com/${selectedCity.toLowerCase()}-egg-rate`,\n      \"aggregateRating\": {\n        \"@type\": \"AggregateRating\",\n        \"ratingValue\": \"4.8\",\n        \"ratingCount\": \"254\"\n      },\n      \"priceRange\": \"₹₹\",\n      \"offers\": {\n        \"@type\": \"Offer\",\n        \"itemOffered\": {\n          \"@type\": \"Product\",\n          \"name\": \"Eggs\",\n          \"description\": `Fresh eggs in ${selectedCity}, ${selectedState}`,\n          \"offers\": {\n            \"@type\": \"Offer\",\n            \"price\": sortedRates[0]?.rate || 0,\n            \"priceCurrency\": \"INR\",\n            \"availability\": \"https://schema.org/InStock\",\n            \"priceValidUntil\": new Date(new Date().setDate(new Date().getDate() + 1)).toISOString().split('T')[0]\n          }\n        }\n      }\n    };\n\n    return (\n      <script type=\"application/ld+json\">\n        {JSON.stringify(localBusinessSchema)}\n      </script>\n    );\n  }, [selectedCity, selectedState, sortedRates]);\n\n  // Early return for empty rates - after all hooks\n  if (!rates || rates.length === 0) {\n    return (\n      <div className=\"text-center p-4\">\n        <p className=\"text-gray-600\">No rates available at the moment.</p>\n      </div>\n    );\n  }\n\n  // Render table\n  return (\n    <div className=\"rate-table-container\">\n      {isTableVisible && (\n        <>\n          {generateStructuredData()}\n          <div className=\"overflow-x-auto\">\n            <table className=\"min-w-full bg-white border-collapse\">\n              <thead>\n                <tr className=\"bg-gray-50\">\n                  {showState && (\n                    <th \n                      className=\"px-4 py-2 text-left cursor-pointer hover:bg-gray-100\"\n                      onClick={() => handleSort('state')}\n                    >\n                      State\n                      {sortConfig.key === 'state' && (\n                        <span className=\"ml-1\">\n                          {sortConfig.direction === 'ascending' ? '↑' : '↓'}\n                        </span>\n                      )}\n                    </th>\n                  )}\n                  <th \n                    className=\"px-4 py-2 text-left cursor-pointer hover:bg-gray-100\"\n                    onClick={() => handleSort('city')}\n                  >\n                    City\n                    {sortConfig.key === 'city' && (\n                      <span className=\"ml-1\">\n                        {sortConfig.direction === 'ascending' ? '↑' : '↓'}\n                      </span>\n                    )}\n                  </th>\n                  {showPriceColumns && (\n                    <>\n                      <th \n                        className=\"px-4 py-2 text-left cursor-pointer hover:bg-gray-100\"\n                        onClick={() => handleSort('rate')}\n                      >\n                        Rate\n                        {sortConfig.key === 'rate' && (\n                          <span className=\"ml-1\">\n                            {sortConfig.direction === 'ascending' ? '↑' : '↓'}\n                          </span>\n                        )}\n                      </th>\n                      <th \n                        className=\"px-4 py-2 text-left cursor-pointer hover:bg-gray-100\"\n                        onClick={() => handleSort('retailPrice')}\n                      >\n                        Retail Price\n                        {sortConfig.key === 'retailPrice' && (\n                          <span className=\"ml-1\">\n                            {sortConfig.direction === 'ascending' ? '↑' : '↓'}\n                          </span>\n                        )}\n                      </th>\n                    </>\n                  )}\n                  {showDate && (\n                    <th \n                      className=\"px-4 py-2 text-left cursor-pointer hover:bg-gray-100\"\n                      onClick={() => handleSort('date')}\n                    >\n                      Date\n                      {sortConfig.key === 'date' && (\n                        <span className=\"ml-1\">\n                          {sortConfig.direction === 'ascending' ? '↑' : '↓'}\n                        </span>\n                      )}\n                    </th>\n                  )}\n                  {showAdmin && (\n                    <th className=\"px-4 py-2 text-left\">Actions</th>\n                  )}\n                </tr>\n              </thead>\n              <tbody>\n                {currentItems.map((rate, index) => (\n                  <tr \n                    key={rate.id || index}\n                    className={index % 2 === 0 ? 'bg-white' : 'bg-gray-50'}\n                  >\n                    {showState && (\n                      <td className=\"px-4 py-2\">{rate.state}</td>\n                    )}\n                    <td className=\"px-4 py-2\">{rate.city}</td>\n                    {showDate && (\n                      <td className=\"px-4 py-2\">\n                        {new Date(rate.date).toLocaleDateString()}\n                      </td>\n                    )}\n                    {showPriceColumns && (\n                      <>\n                        <td className=\"px-4 py-2\">₹{rate.rate}</td>\n                        <td className=\"px-4 py-2\">₹{(rate.rate * 30).toFixed(2)}</td>\n                      </>\n                    )}\n                    {showAdmin && (\n                      <td className=\"px-4 py-2\">\n                        <button\n                          onClick={() => onEdit(rate)}\n                          className=\"mr-2 text-blue-600 hover:text-blue-800\"\n                        >\n                          Edit\n                        </button>\n                        <button\n                          onClick={() => onDelete(rate.id)}\n                          className=\"text-red-600 hover:text-red-800\"\n                        >\n                          Delete\n                        </button>\n                      </td>\n                    )}\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n          <div className=\"flex justify-center mt-4\">\n            {renderPaginationControls()}\n          </div>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default memo(RateTable);"],"names":["RateTable","_ref","rates","itemsPerPage","showAdmin","onDelete","onEdit","handleSort","externalHandleSort","showState","showDate","showPriceColumns","selectedCity","selectedState","currentPage","setCurrentPage","useState","sortConfig","setSortConfig","key","direction","isTableVisible","setIsTableVisible","useCallback","prevConfig","sortedRates","useMemo","sort","a","b","aVal","bVal","handlePageClick","pageNumber","totalPages","Math","ceil","length","indexOfLastItem","indexOfFirstItem","currentItems","slice","useEffect","observer","IntersectionObserver","_ref2","entry","isIntersecting","disconnect","threshold","tableContainer","document","querySelector","observe","renderPaginationControls","pages","i","push","_jsx","onClick","className","concat","children","generateStructuredData","_sortedRates$","localBusinessSchema","toLowerCase","rate","Date","setDate","getDate","toISOString","split","type","JSON","stringify","_jsxs","_Fragment","map","index","state","city","date","toLocaleDateString","toFixed","id","memo"],"sourceRoot":""}