"use strict";(self.webpackChunkfood_price_app=self.webpackChunkfood_price_app||[]).push([[3846],{3846:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var r=t(9379),s=t(9950),n=t(5907),i=t(2772),o=t(3983),l=t(172),d=t(3600),c=t(2164),g=t(1024),h=t(4488),m=t(4414);const x=s.memo((e=>{var a,t,x;let{rates:u=[],showChart:y=!0,itemsPerPage:b=10,showAdmin:p=!1,showSpecialRates:k=!1,chartType:v="bar",onDelete:j,onEdit:w,handleSort:N,showState:f=!1,showDate:C=!1,showPriceColumns:S=!0,selectedCity:L="",selectedState:A="",showMarket:M=!0,isLoading:R=!1,error:D=null,onRetry:P=null,canRetry:H=!1}=e;const[I,B]=(0,s.useState)(1),[E,W]=(0,s.useState)({key:L?"date":"city",direction:"ascending"}),[T,F]=(0,s.useState)(null),[O,U]=(0,s.useState)({}),[V,_]=(0,s.useState)(null),z="400px",J="48px",K="600px",q=(0,s.useMemo)((()=>"\n    min-h-[".concat(K,"]\n    bg-white dark:bg-gray-900\n    rounded-lg shadow-lg\n    border border-gray-200 dark:border-gray-700\n    transition-all duration-300\n    hover:shadow-xl\n  ")),[K]),G=(0,s.useMemo)((()=>"\n    min-h-[".concat(z,"]\n    w-full\n    bg-white dark:bg-gray-900\n    border-collapse\n    border-spacing-0\n  ")),[z]),Q=(0,s.useMemo)((()=>"\n    h-[".concat(J,"]\n    bg-amber-500 dark:bg-amber-600\n    sticky top-0\n    z-10\n    border-b border-amber-600 dark:border-amber-700\n  ")),[J]),X=(0,s.useCallback)((()=>(0,m.jsx)("div",{className:"".concat(q," flex items-center justify-center p-8"),children:(0,m.jsxs)("div",{className:"text-center max-w-md",children:[(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsx)("svg",{className:"w-16 h-16 text-red-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),(0,m.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"Data Loading Failed"}),(0,m.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:(null===D||void 0===D?void 0:D.message)||"Unable to load egg rate data. This might be due to a temporary server issue."}),(0,m.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 justify-center",children:[H&&P&&(0,m.jsxs)("button",{onClick:P,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 flex items-center justify-center",children:[(0,m.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Retry"]}),(0,m.jsxs)("button",{onClick:()=>{(0,h.I3)(),window.location.reload()},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200 flex items-center justify-center",children:[(0,m.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Force Refresh"]})]}),(0,m.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-3",children:"If the problem persists, please try refreshing the page or contact support."})]})})),[q,D,H,P]),Y=(0,s.useCallback)((()=>(0,m.jsxs)("div",{className:"".concat(q," animate-pulse"),role:"status","aria-label":"Loading egg rates",children:[(0,m.jsxs)("div",{style:{minHeight:z},children:[(0,m.jsx)("div",{className:Q}),[...Array(5)].map(((e,a)=>(0,m.jsxs)("div",{style:{height:J},className:"p-4 flex items-center border-t border-gray-100 dark:border-gray-800 space-x-4",children:[(0,m.jsx)("div",{className:"w-1/4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),(0,m.jsx)("div",{className:"w-1/4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),(0,m.jsx)("div",{className:"w-1/4 h-4 bg-gray-200 dark:bg-gray-700 rounded"}),(0,m.jsx)("div",{className:"w-1/4 h-4 bg-gray-200 dark:bg-gray-700 rounded"})]},a)))]}),(0,m.jsx)("div",{className:"p-4 text-center",children:(0,m.jsxs)("div",{className:"inline-flex items-center space-x-2",children:[(0,m.jsx)("div",{className:"w-5 h-5 border-2 border-blue-200 border-t-blue-600 rounded-full animate-spin"}),(0,m.jsx)("span",{className:"text-gray-600 dark:text-gray-400",children:"Loading latest egg rates..."})]})})]})),[q,Q,z,J]),Z=(0,s.useCallback)((()=>(0,m.jsx)("div",{className:"".concat(G," flex items-center justify-center p-8"),children:(0,m.jsxs)("div",{className:"text-center",children:[(0,m.jsx)("div",{className:"mb-4",children:(0,m.jsx)("svg",{className:"w-16 h-16 text-gray-400 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,m.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-2",children:"No Data Available"}),(0,m.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:L||A?"No egg rate data found for ".concat(L||A,"."):"No egg rate data is currently available."}),H&&P&&(0,m.jsxs)("button",{onClick:P,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 inline-flex items-center",children:[(0,m.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Try Again"]})]})})),[G,L,A,H,P]),$=N?u:[...u].sort(((e,a)=>e[E.key]<a[E.key]?"ascending"===E.direction?-1:1:e[E.key]>a[E.key]?"ascending"===E.direction?1:-1:0)),ee=I*b,ae=$.slice(ee-b,ee),te=Array.from({length:Math.ceil((null===u||void 0===u?void 0:u.length)/b)},((e,a)=>a+1)),re=(0,s.useCallback)((e=>{if(N)N(e);else{let a="ascending";E.key===e&&"ascending"===E.direction&&(a="descending"),W({key:e,direction:a})}}),[N,E]),se=(0,s.useCallback)((e=>{F(e.id),U(e)}),[]),ne=(0,s.useCallback)((()=>{w&&w(O),F(null)}),[w,O]),ie=(0,s.useCallback)((()=>{F(null),U({})}),[]),oe=(0,s.useCallback)((e=>{const{name:a,value:t}=e.target;U((e=>(0,r.A)((0,r.A)({},e),{},{[a]:t})))}),[]),le=(0,s.useCallback)((e=>(0,m.jsx)("svg",E.key!==e?{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}:{className:"w-4 h-4 text-amber-800 dark:text-amber-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,m.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"ascending"===E.direction?"M8 7l4-4m0 0l4 4m-4-4v18":"M16 17l-4 4m0 0l-4-4m4 4V3"})})),[E]),de=L?[...$].sort(((e,a)=>new Date(a.date)-new Date(e.date))):Object.values($.reduce(((e,a)=>((!e[a.city]||new Date(a.date)>new Date(e[a.city].date))&&(e[a.city]=a),e)),{})),ce=(null===(a=$[0])||void 0===a?void 0:a.rate)||0,ge=(null===(t=$[1])||void 0===t?void 0:t.rate)||ce,he=ce-ge,me=ge?he/ge*100:0,xe=30*ce,ue=null!==(x=$[0])&&void 0!==x&&x.date?new Date($[0].date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),ye=(0,s.useMemo)((()=>L?{"@context":"https://schema.org","@type":"LocalBusiness",name:"Egg Market ".concat(L),description:"Find today's egg rates in ".concat(L,", ").concat(A,". Updated daily NECC egg prices."),address:{"@type":"PostalAddress",addressLocality:String(L),addressRegion:String(A),addressCountry:"IN"},offers:{"@type":"Offer",price:String(ce||0),priceCurrency:"INR",availability:"https://schema.org/InStock"}}:null),[L,A,ce]),be=(0,s.useMemo)((()=>{return L?{"@context":"https://schema.org","@type":"Product",name:"Eggs in ".concat(L,", ").concat(A),description:"Fresh eggs available in ".concat(L,", ").concat(A,". Check today's egg price."),offers:{"@type":"Offer",url:"https://todayeggrates.com/".concat((e=L,e?String(e).toLowerCase():""),"-egg-rate-today"),priceCurrency:"INR",price:String(ce||0),availability:"https://schema.org/InStock"}}:null;var e}),[L,A,ce]);return(0,s.useMemo)((()=>R?Y():D?(0,m.jsx)(X,{}):u&&0!==(null===u||void 0===u?void 0:u.length)?(0,m.jsxs)(m.Fragment,{children:[L&&!R&&(0,m.jsxs)(i.m,{children:[ye&&(0,m.jsx)("script",{type:"application/ld+json",children:JSON.stringify(ye)}),be&&(0,m.jsx)("script",{type:"application/ld+json",children:JSON.stringify(be)})]}),(0,m.jsxs)("div",{className:q,children:[k&&(0,m.jsxs)("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-t-lg border-b border-gray-200 dark:border-gray-700",children:[(0,m.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-center text-gray-800 dark:text-gray-100",children:"Special Rates"}),(0,m.jsx)("p",{className:"text-center text-gray-600 dark:text-gray-400 mt-2",children:"Today's wholesale egg rates for special markets and bulk buyers"})]}),!k&&(null===de||void 0===de?void 0:de.length)>0&&(0,m.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-t-lg",children:(0,m.jsx)(l.A,{latestRate:ce,latestRateDate:ue,rateChange:he,percentageChange:me,trayPrice:xe})}),(0,m.jsx)("div",{className:"overflow-x-auto bg-white dark:bg-gray-800 rounded-lg",children:(0,m.jsxs)("table",{className:"min-w-full border-collapse",role:"table","aria-label":"Egg Rates Table",children:[(0,m.jsx)("thead",{className:Q,children:(0,m.jsx)(o.A,{selectedCity:L,showMarket:M,showState:f,showDate:C,showPriceColumns:S,showSpecialRates:k,showAdmin:p,sortConfig:E,requestSort:re,getSortIcon:le})}),(0,m.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-700",children:ae.map(((e,a)=>(0,m.jsx)(d.A,{rate:e,index:a,hoveredRow:V,selectedCity:L,showMarket:M,showState:f,showDate:C,showPriceColumns:S,showSpecialRates:k,showAdmin:p,editingRate:T,editedRate:O,handleChange:oe,handleEditClick:se,handleSaveClick:ne,handleCancelClick:ie,onDelete:j,setHoveredRow:_,rowHeight:J},"".concat(e.city,"-").concat(e.date,"-").concat(a))))})]})}),(0,m.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-b-lg border-t border-gray-200 dark:border-gray-700",children:(0,m.jsx)(c.A,{currentPage:I,setCurrentPage:B,pages:te,isLoading:R})}),y&&(0,m.jsx)("div",{className:"mt-6 bg-white dark:bg-gray-800 rounded-lg p-4 shadow-sm",children:(0,m.jsx)(n.A,{data:ae,type:L?"line":"bar",xKey:L?"date":"city",yKey:"rate",title:L?"".concat(L," Egg Price Trend"):"Egg Rates by City",isLoading:R})}),(0,m.jsx)("div",{className:"mt-6",children:(0,m.jsx)(g.A,{selectedCity:L,selectedState:A||"India",isLoading:R})})]})]}):(0,m.jsx)(Z,{})),[R,D,u,L,A,k,de,ce,ue,he,me,xe,ae,I,O,T,V,ye,be,Y,q,Q,p,y,C,M,S,f,E,te,le,ie,oe,se,ne,j,re])}))}}]);