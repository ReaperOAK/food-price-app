"use strict";(self.webpackChunkfood_price_app=self.webpackChunkfood_price_app||[]).push([[427],{497:(e,t,a)=>{a.r(t),a.d(t,{default:()=>l});var r=a(9379),s=a(5043),i=a(461),n=a(6058),c=a(579);i.t1.register(i.PP,i.kc,i.E8,i.hE,i.m_,i.s$,...i.$L);const l=e=>{let{mode:t="default",selectedCity:a,selectedState:i,eggRates:l=[],handleSort:d,setEggRate:o,handleDelete:x,handleEditRate:p}=e;const[y,h]=(0,s.useState)(1),[m,g]=(0,s.useState)({key:"city",direction:"ascending"}),[u,f]=(0,s.useState)(null),[b,j]=(0,s.useState)({}),[w,v]=(0,s.useState)([]);(0,s.useEffect)((()=>{"special"===t&&fetch("/php/api/rates/get_special_rates.php").then((e=>e.json())).then((e=>v(e))).catch((e=>console.error("Error fetching special rates:",e)))}),[t]);const N=[];for(let r=1;r<=Math.ceil(l.length/10);r++)N.push(r);const k=10*y,O=k-10,S=[...l].sort(((e,t)=>m.key?e[m.key]<t[m.key]?"ascending"===m.direction?-1:1:e[m.key]>t[m.key]?"ascending"===m.direction?1:-1:0:0)),C="special"===t?w:S.slice(O,k),P={labels:C.map((e=>e.city||e.date)),datasets:[{label:"Egg Rates",data:C.map((e=>e.rate)),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,tension:.3,fill:"rate"===t}]},A={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"rate"===t?"Rate Trends":"Egg Rates Comparison"},tooltip:{callbacks:{label:e=>"\u20b9".concat(e.raw.toFixed(2))}}},scales:{y:{beginAtZero:!1,ticks:{callback:e=>"\u20b9".concat(e.toFixed(2))}}}},E=()=>{p(b),f(null)},F=e=>{j((0,r.A)((0,r.A)({},b),{},{[e.target.name]:e.target.value}))};return(0,c.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[(()=>{switch(t){case"special":return(0,c.jsxs)("div",{className:"p-6 mt-6 bg-white rounded-lg shadow-lg",children:[(0,c.jsx)("h2",{className:"text-3xl font-bold mb-6 text-center text-gray-800",children:"Special Rates"}),(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,c.jsx)("thead",{style:{backgroundColor:"#f9be0c"},children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Market"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Piece"}),(0,c.jsx)("th",{className:"px-6 py-3 text-left text-sm font-semibold text-gray-600 uppercase tracking-wider",children:"Tray"})]})}),(0,c.jsx)("tbody",{children:C.length>0?C.map(((e,t)=>(0,c.jsxs)("tr",{className:"transition duration-150 ease-in-out ".concat(t%2===0?"bg-[#fffcdf]":"bg-[#fff1c8]"," hover:bg-[#ddfafe]"),children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:e.city}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:["\u20b9",parseFloat(e.rate).toFixed(2)]}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-700",children:["\u20b9",parseFloat(30*e.rate).toFixed(2)]})]},t))):(0,c.jsx)("tr",{children:(0,c.jsx)("td",{colSpan:"3",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No special rates available"})})})]})})]});case"rate":return(0,c.jsxs)("div",{className:"mt-6",children:[(0,c.jsx)("div",{style:{height:"400px"},children:(0,c.jsx)(n.N1,{data:P,options:A})}),(0,c.jsx)("div",{className:"mt-6 overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),(0,c.jsx)("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rate"}),(0,c.jsx)("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tray Price"})]})}),(0,c.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.date}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",e.rate.toFixed(2)]}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",(30*e.rate).toFixed(2)]})]},t)))})]})})]});case"admin":return(0,c.jsx)("div",{className:"overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,c.jsx)("button",{onClick:()=>{var e;g({key:e="city",direction:m.key===e&&"ascending"===m.direction?"descending":"ascending"})},children:"City"})}),(0,c.jsx)("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,c.jsx)("button",{onClick:()=>d("state"),children:"State"})}),(0,c.jsx)("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,c.jsx)("button",{onClick:()=>d("rate"),children:"Rate"})}),(0,c.jsx)("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,c.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(((e,t)=>(0,c.jsx)("tr",{children:u===e?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("input",{type:"text",name:"city",value:b.city,onChange:F,className:"border rounded px-2 py-1"})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("input",{type:"text",name:"state",value:b.state,onChange:F,className:"border rounded px-2 py-1"})}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,c.jsx)("input",{type:"number",name:"rate",value:b.rate,onChange:F,className:"border rounded px-2 py-1"})}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,c.jsx)("button",{onClick:E,className:"text-green-600 hover:text-green-900 mr-2",children:"Save"}),(0,c.jsx)("button",{onClick:()=>f(null),className:"text-gray-600 hover:text-gray-900",children:"Cancel"})]})]}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.city}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.state}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",e.rate.toFixed(2)]}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,c.jsx)("button",{onClick:()=>(e=>{f(e),j(e)})(e),className:"text-indigo-600 hover:text-indigo-900 mr-2",children:"Edit"}),(0,c.jsx)("button",{onClick:()=>x(e),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]})},t)))})]})});default:return(0,c.jsxs)("div",{children:[(0,c.jsx)("div",{style:{height:"400px"},children:(0,c.jsx)(n.yP,{data:P,options:A})}),(0,c.jsx)("div",{className:"mt-6 overflow-x-auto",children:(0,c.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"City"}),(0,c.jsx)("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"State"}),(0,c.jsx)("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rate"})]})}),(0,c.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.city}),(0,c.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.state}),(0,c.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20b9",e.rate.toFixed(2)]})]},t)))})]})})]})}})(),"special"!==t&&C.length>10&&(0,c.jsx)("div",{className:"flex justify-center mt-4 space-x-2",children:N.map((e=>(0,c.jsx)("button",{onClick:()=>h(e),className:"px-3 py-1 rounded ".concat(y===e?"bg-blue-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:e},e)))})]})}},4467:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(816);function s(e,t,a){return(t=(0,r.A)(t))in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}},9379:(e,t,a)=>{a.d(t,{A:()=>i});var r=a(4467);function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){(0,r.A)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}},3986:(e,t,a)=>{function r(e,t){if(null==e)return{};var a,r,s=function(e,t){if(null==e)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;a[r]=e[r]}return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)a=i[r],t.includes(a)||{}.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}a.d(t,{A:()=>r})},816:(e,t,a)=>{a.d(t,{A:()=>s});var r=a(2284);function s(e){var t=function(e,t){if("object"!=(0,r.A)(e)||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=(0,r.A)(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==(0,r.A)(t)?t:t+""}},2284:(e,t,a)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}a.d(t,{A:()=>r})}}]);
//# sourceMappingURL=egg-rates-table.5af102df.chunk.js.map