"use strict";(self.webpackChunkfood_price_app=self.webpackChunkfood_price_app||[]).push([[657],{9672:(e,t,s)=>{s.r(t),s.d(t,{default:()=>i});var a=s(5043),l=s(3216),o=s(5840),c=s(8533),r=s(1591),n=s(579);const i=()=>{const{slug:e}=(0,l.g)(),t=(0,l.Zp)(),[s,i]=(0,a.useState)(!0),[d,x]=(0,a.useState)(null),[p,h]=(0,a.useState)(""),[g,m]=(0,a.useState)(""),[b,u]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async()=>{try{i(!0);const t=await fetch("/php/get_web_stories.php");if(!t.ok)throw new Error("Failed to fetch web story data");const s=(await t.json()).find((t=>t.slug===e));if(!s)throw new Error("Story not found");u(s),m(s.city),h(s.state);if(!(await fetch("/webstories/".concat(e,".html"),{method:"HEAD"})).ok)throw new Error("Web story content not found")}catch(t){x(t.message||"Failed to load web story")}finally{i(!1)}})()}),[e]);return s?(0,n.jsxs)("div",{className:"bg-gray-50 min-h-screen flex flex-col",children:[(0,n.jsx)(o.A,{selectedState:p,setSelectedState:h,setSelectedCity:m,selectedCity:g}),(0,n.jsx)("div",{className:"container mx-auto p-6 flex-grow flex items-center justify-center",children:(0,n.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-blue-500"})}),(0,n.jsx)(c.A,{})]}):d?(0,n.jsxs)("div",{className:"bg-gray-50 min-h-screen flex flex-col",children:[(0,n.jsx)(o.A,{selectedState:p,setSelectedState:h,setSelectedCity:m,selectedCity:g}),(0,n.jsx)("div",{className:"container mx-auto p-6 flex-grow",children:(0,n.jsxs)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",children:[(0,n.jsx)("strong",{className:"font-bold",children:"Error: "}),(0,n.jsx)("span",{className:"block sm:inline",children:d}),(0,n.jsx)("button",{onClick:()=>t("/webstories"),className:"mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Back to Web Stories"})]})}),(0,n.jsx)(c.A,{})]}):(0,n.jsxs)("div",{className:"bg-gray-50 min-h-screen flex flex-col",children:[b?(0,n.jsxs)(r.m,{children:[(0,n.jsx)("title",{children:"".concat(b.title," - Today Egg Rates")}),(0,n.jsx)("meta",{name:"description",content:"View the latest egg rates in ".concat(b.city,", ").concat(b.state,". Current price: \u20b9").concat(b.rate," per egg (Updated: ").concat(b.date,")")}),(0,n.jsx)("link",{rel:"canonical",href:"https://todayeggrates.com/webstory/".concat(b.slug)}),(0,n.jsx)("meta",{property:"og:title",content:b.title}),(0,n.jsx)("meta",{property:"og:description",content:"Current egg rate in ".concat(b.city,", ").concat(b.state,": \u20b9").concat(b.rate," (Updated: ").concat(b.date,")")}),(0,n.jsx)("meta",{property:"og:image",content:"https://todayeggrates.com".concat(b.thumbnail)}),(0,n.jsx)("meta",{property:"og:url",content:"https://todayeggrates.com/webstory/".concat(b.slug)}),(0,n.jsx)("meta",{property:"og:type",content:"article"})]}):null,(0,n.jsx)(o.A,{selectedState:p,setSelectedState:h,setSelectedCity:m,selectedCity:g}),(0,n.jsx)("div",{className:"flex-grow relative w-full",style:{height:"calc(100vh - 140px)"},children:(0,n.jsx)("iframe",{src:"/webstories/".concat(e,".html"),title:b?b.title:"Web Story - ".concat(e),className:"w-full h-full absolute inset-0 border-none",allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups allow-forms allow-presentation"})}),(0,n.jsxs)("div",{className:"p-4 bg-white shadow-md flex justify-between items-center",children:[(0,n.jsx)("button",{onClick:()=>t("/webstories"),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"Back to All Web Stories"}),b&&(0,n.jsxs)("div",{className:"text-right",children:[(0,n.jsxs)("p",{className:"font-bold text-lg",children:["\u20b9",b.rate," per egg"]}),(0,n.jsxs)("p",{className:"text-sm text-gray-600",children:["Updated: ",b.date]})]})]}),(0,n.jsx)(c.A,{})]})}}}]);
//# sourceMappingURL=webstory-viewer.369d7e12.chunk.js.map