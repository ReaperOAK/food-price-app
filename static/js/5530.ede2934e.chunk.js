"use strict";(self.webpackChunkfood_price_app=self.webpackChunkfood_price_app||[]).push([[5530],{5530:(t,a,e)=>{e.d(a,{Gd:()=>g,Hu:()=>w,Nz:()=>_,Si:()=>c,UW:()=>d,VW:()=>y,Y8:()=>n,_e:()=>o,a8:()=>p,bb:()=>h,h6:()=>s,iO:()=>u,oi:()=>l,sl:()=>m,xx:()=>f,zb:()=>i});var r=e(9379);const o=async()=>{const t=await fetch("/php/get_web_stories.php");if(!t.ok)throw new Error("Failed to fetch web stories");const a=await t.json();return Array.isArray(a)?a:[]},n=async(t,a)=>{try{let e;if(t||a){const r=new URLSearchParams;t&&r.append("city",t.trim()),a&&r.append("state",a.trim()),e="/php/api/rates/get_rates.php?".concat(r.toString())}else e="/php/api/rates/get_latest_rates.php";const o=await fetch(e);if(!o.ok)throw new Error("HTTP error! status: ".concat(o.status));const n=await o.json();return Array.isArray(n)?n.map((t=>{const a=parseFloat(t.rate);return(0,r.A)((0,r.A)({},t),{},{rate:isNaN(a)?0:a})})):[]}catch(e){throw e}},s=async()=>{const t=await fetch("/php/api/rates/get_special_rates.php");return(await t.json()).map((t=>(0,r.A)((0,r.A)({},t),{},{rate:parseFloat(t.rate)})))},i=async()=>(await fetch("/php/api/location/get_states.php")).json(),p=async t=>(await fetch("/php/api/location/get_cities.php?state=".concat(t))).json(),c=async t=>(await fetch("/php/api/location/get_state_for_city.php?city=".concat(t))).json(),h=async t=>{const a=await fetch("/php/api/location/get_states_and_cities.php",{signal:t});if(!a.ok)throw new Error("Failed to fetch locations");return a.json()},l=async t=>{if(!(await fetch("/ampstory/".concat(t,".html"),{method:"HEAD",headers:{Accept:"text/html"}})).ok)throw new Error("Web story content not found");return!0},d=async(t,a,e)=>{const r=await fetch("/php/api/rates/get_rates.php?city=".concat(t,"&state=").concat(a,"&days=").concat(e));if(!r.ok)throw new Error("Failed to fetch rates");return(await r.json()).map((e=>({id:e.id||String(Math.random()),city:e.city||t,state:e.state||a,date:e.date||(new Date).toISOString().split("T")[0],rate:"number"===typeof e.rate?e.rate:parseFloat(e.rate)||0})))},y=async t=>{try{const a=await fetch("/php/api/rates/get_all_rates.php?date=".concat(t));if(!a.ok)throw new Error("Failed to fetch all rates");const e=await a.json();return Array.isArray(e)?e.map((t=>{const a=parseFloat(t.rate);return(0,r.A)((0,r.A)({},t),{},{rate:isNaN(a)?0:a})})):[]}catch(a){throw a}},w=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;try{const a={method:t?"POST":"GET",headers:{"Content-Type":"application/json"}};t&&(a.body=JSON.stringify(t));const e=await fetch("/php/api/rates/get_latest_rates.php",a);if(!e.ok)throw new Error("Failed to fetch latest rates");const o=await e.json();return Array.isArray(o)?o.map((t=>{const a=parseFloat(t.rate);return(0,r.A)((0,r.A)({},t),{},{rate:isNaN(a)?0:a})})):[]}catch(a){throw a}},f=async t=>{const a=await fetch("/php/api/rates/update_multiple_rates.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to update rates");return a.json()},u=async t=>{const a=await fetch("/php/api/rates/delete_rate.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})});if(!a.ok)throw new Error("Failed to delete rate");return a.json()},_=async function(t,a){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=await fetch("/php/api/location/add_state_city.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,r.A)({type:t,name:a},e&&{state:e}))});if(!o.ok)throw new Error("Failed to add ".concat(t));return o.json()},m=async function(t,a){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const o=await fetch("/php/api/location/remove_state_city.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,r.A)({type:t,name:a},e&&{state:e}))});if(!o.ok)throw new Error("Failed to remove ".concat(t));return o.json()},g=async t=>{const a=await fetch("/php/api/rates/update_rate.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok)throw new Error("Failed to update rate");return a.json()}}}]);