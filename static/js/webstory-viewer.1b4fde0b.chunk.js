"use strict";(self.webpackChunkfood_price_app=self.webpackChunkfood_price_app||[]).push([[657],{47:(e,t,s)=>{s.r(t),s.d(t,{default:()=>d});var l=s(9950),a=s(8429),o=s(5467),r=s(6846),i=s(5931),n=s(5530),c=s(4414);const d=()=>{const{slug:e}=(0,a.g)(),t=(0,a.zy)(),s=(0,a.Zp)(),[d,x]=(0,l.useState)(!0),[g,u]=(0,l.useState)(null),[f,m]=(0,l.useState)(""),[h,b]=(0,l.useState)(""),[y,p]=(0,l.useState)(null),w=(0,l.useCallback)((async()=>{try{x(!0);const t=(await(0,n._e)()).find((t=>t.slug===e));if(!t)throw new Error("Story not found");p(t),b(t.city),m(t.state),await(0,n.oi)(e)}catch(t){u(t.message||"Failed to load web story")}finally{x(!1)}}),[e]);return(0,l.useEffect)((()=>{w()}),[w]),(0,c.jsxs)("div",d?{className:"bg-gray-50 min-h-screen flex flex-col",role:"alert","aria-busy":"true",children:[(0,c.jsx)(o.A,{selectedState:f,setSelectedState:m,setSelectedCity:b,selectedCity:h}),(0,c.jsx)("div",{className:"container mx-auto p-6 flex-grow flex items-center justify-center",children:(0,c.jsxs)("div",{className:"flex flex-col items-center",children:[(0,c.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-indigo-600",role:"progressbar","aria-label":"Loading web story"}),(0,c.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading web story..."})]})}),(0,c.jsx)(r.default,{})]}:g?{className:"bg-gray-50 min-h-screen flex flex-col",role:"alert",children:[(0,c.jsx)(o.A,{selectedState:f,setSelectedState:m,setSelectedCity:b,selectedCity:h}),(0,c.jsx)("div",{className:"container mx-auto p-6 flex-grow",children:(0,c.jsx)("div",{className:"max-w-lg mx-auto bg-white rounded-lg shadow-lg overflow-hidden",children:(0,c.jsxs)("div",{className:"p-6",children:[(0,c.jsxs)("div",{className:"flex items-center text-red-600 mb-4",children:[(0,c.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,c.jsx)("h2",{className:"text-xl font-semibold",children:"Error Loading Web Story"})]}),(0,c.jsx)("p",{className:"text-gray-600 mb-6",children:g}),(0,c.jsxs)("div",{className:"flex gap-4",children:[(0,c.jsx)("button",{onClick:()=>s("/webstories"),className:"px-6 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors duration-200",children:"Back to Web Stories"}),(0,c.jsx)("button",{onClick:()=>w(),className:"px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-colors duration-200",children:"Try Again"})]})]})})}),(0,c.jsx)(r.default,{})]}:{className:"bg-gray-50 min-h-screen flex flex-col",children:["      ",!d&&(0,c.jsx)(i.A,{location:t,selectedCity:(null===y||void 0===y?void 0:y.city)||"Web Story",selectedState:(null===y||void 0===y?void 0:y.state)||"",eggRates:[],isLoading:d}),(0,c.jsx)(o.A,{selectedState:f,setSelectedState:m,setSelectedCity:b,selectedCity:h}),(0,c.jsx)("div",{className:"flex-grow relative w-full",style:{height:"calc(100vh - 144px)"},children:(0,c.jsx)("iframe",{src:"/webstories/".concat(e,".html"),title:y?y.title:"Web Story - ".concat(e),className:"w-full h-full absolute inset-0 border-none",allowFullScreen:!0,sandbox:"allow-scripts allow-same-origin allow-popups allow-forms allow-presentation",loading:"eager"})}),(0,c.jsx)("div",{className:"bg-white shadow-md border-t border-gray-100",children:(0,c.jsxs)("div",{className:"container mx-auto px-4 py-3 flex flex-col sm:flex-row justify-between items-center gap-4",children:[(0,c.jsxs)("button",{onClick:()=>s("/webstories"),className:"w-full sm:w-auto px-6 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 active:bg-indigo-800 transition-colors duration-200 flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[(0,c.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to All Web Stories"]}),y&&(0,c.jsxs)("div",{className:"text-center sm:text-right",children:[(0,c.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20b9",y.rate," ",(0,c.jsx)("span",{className:"text-base font-normal text-gray-600",children:"per egg"})]}),(0,c.jsxs)("p",{className:"text-sm text-gray-600",children:["Last updated: ",y.date]})]})]})}),(0,c.jsx)(r.default,{})]})}}}]);