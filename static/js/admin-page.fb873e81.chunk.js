"use strict";(self.webpackChunkfood_price_app=self.webpackChunkfood_price_app||[]).push([[832],{6853:(e,t,a)=>{a.r(t),a.d(t,{default:()=>n});var s=a(9379),r=(a(5043),a(579));const n=e=>{let{eggRate:t,setEggRate:a,handleSubmit:n,handleSelectAll:o,handleCopyPreviousRates:l}=e;return(0,r.jsxs)("form",{onSubmit:n,className:"mb-6 grid grid-cols-1 gap-4",children:[(0,r.jsx)("button",{type:"button",onClick:o,className:"bg-green-600 text-white p-3 rounded w-full hover:bg-green-700 transition",children:"Select All Cities"}),(0,r.jsx)("input",{type:"date",value:t.date,onChange:e=>a((0,s.A)((0,s.A)({},t),{},{date:e.target.value})),className:"border border-gray-300 p-3 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500 transition",required:!0}),(0,r.jsx)("input",{type:"number",placeholder:"Rate",value:t.rate,onChange:e=>a((0,s.A)((0,s.A)({},t),{},{rate:e.target.value})),className:"border border-gray-300 p-3 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500 transition",required:!0}),(0,r.jsx)("button",{type:"submit",className:"bg-blue-600 text-white p-3 rounded w-full hover:bg-blue-700 transition",children:"Update Rates"}),(0,r.jsx)("button",{type:"button",onClick:l,className:"bg-yellow-600 text-white p-3 rounded w-full hover:bg-yellow-700 transition",children:"Copy Previous Rates"})]})}},3267:(e,t,a)=>{a.d(t,{A:()=>o});a(5043);var s=a(461),r=a(6058),n=a(579);s.t1.register(s.PP,s.kc,s.E8,s.hE,s.m_,s.s$,s.No,s.FN);const o=e=>{let{data:t=[],title:a="Egg Rates",chartType:s="bar",xAxisKey:o="city",yAxisKey:l="rate",showLine:i=!1}=e;if(!t||0===t.length)return null;const c={labels:t.map((e=>{return(t=e[o])&&"date"===o?new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"}):t;var t})),datasets:[{label:a,data:t.map((e=>e[l])),backgroundColor:"rgba(75, 192, 192, 0.6)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1,fill:!i&&void 0,tension:i?.3:void 0,pointRadius:i?4:void 0,pointHoverRadius:i?6:void 0}]},d={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:a},tooltip:{callbacks:{label:function(e){return"\u20b9".concat(e.raw.toFixed(2))}}}},scales:{y:{beginAtZero:!1,ticks:{callback:function(e){return"\u20b9"+e.toFixed(2)}}}}},u="line"===s?r.N1:r.yP;return(0,n.jsx)("div",{className:"mt-8",style:{position:"relative",height:"400px",width:"100%"},children:(0,n.jsx)(u,{data:c,options:d})})}},5927:(e,t,a)=>{a.r(t),a.d(t,{default:()=>i});var s=a(9379),r=a(5043),n=a(3267),o=a(1591),l=a(579);const i=e=>{var t,a,i;let{rates:c=[],showChart:d=!0,itemsPerPage:u=10,showAdmin:h=!1,showSpecialRates:g=!1,chartType:p="bar",onDelete:m,onEdit:y,handleSort:b,showState:x=!1,showDate:f=!1,showPriceColumns:j=!0,selectedCity:v="",selectedState:N="",showMarket:w=!0,isLoading:S=!1}=e;const[C,k]=(0,r.useState)(1),[A,E]=(0,r.useState)({key:"city",direction:"ascending"}),[P,R]=(0,r.useState)(null),[O,T]=(0,r.useState)({}),[D,F]=(0,r.useState)(null),_=e=>A.key!==e?"\u2195\ufe0f":"ascending"===A.direction?"\u2191":"\u2193";if(S)return(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded w-full mb-4"}),[...Array(5)].map(((e,t)=>(0,l.jsx)("div",{className:"h-16 bg-gray-100 rounded w-full mb-2"},t)))]});if(!c||0===c.length)return(0,l.jsx)("div",{className:g?"p-6 mt-6 bg-white rounded-lg shadow-lg text-center":"p-6 mt-6 bg-gray-100 rounded-lg shadow-lg text-center",children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4",children:[(0,l.jsx)("svg",{className:"w-16 h-16 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M12 20h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,l.jsx)("p",{className:"text-gray-600 text-lg",children:g?"No special rates available at the moment":"No rates available at the moment"})]})});const L=b?c:[...c].sort(((e,t)=>e[A.key]<t[A.key]?"ascending"===A.direction?-1:1:e[A.key]>t[A.key]?"ascending"===A.direction?1:-1:0)),M=C*u,I=M-u,J=L.slice(I,M),X=[];for(let s=1;s<=Math.ceil(c.length/u);s++)X.push(s);const U=e=>{b?b(e):(e=>{let t="ascending";A.key===e&&"ascending"===A.direction&&(t="descending"),E({key:e,direction:t})})(e)},q=()=>{y&&y(O),R(null)},V=()=>{R(null),T({})},W=e=>{const{name:t,value:a}=e.target;T((e=>(0,s.A)((0,s.A)({},e),{},{[t]:a})))},z=(null===(t=L[0])||void 0===t?void 0:t.rate)||0,B=(null===(a=L[1])||void 0===a?void 0:a.rate)||z,H=z-B,K=B?H/B*100:0,Z=30*z,$=null!==(i=L[0])&&void 0!==i&&i.date?new Date(L[0].date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),G=v?{"@context":"https://schema.org","@type":"LocalBusiness",name:"Egg Market ".concat(v),description:"Find today's egg rates in ".concat(v,", ").concat(N,". Updated daily NECC egg prices and wholesale egg rates."),address:{"@type":"PostalAddress",addressLocality:v,addressRegion:N,addressCountry:"IN"},image:"https://todayeggrates.com/eggpic.webp",priceRange:"\u20b9\u20b9",telephone:"+91-XXXXXXXXXX",url:"https://todayeggrates.com/".concat(v.toLowerCase(),"-egg-rate"),aggregateRating:{"@type":"AggregateRating",ratingValue:"4.8",ratingCount:"254"},openingHoursSpecification:[{"@type":"OpeningHoursSpecification",dayOfWeek:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],opens:"06:00",closes:"21:00"}],offers:{"@type":"Offer",itemOffered:{"@type":"Product",name:"Eggs",description:"Fresh eggs in ".concat(v,", ").concat(N),offers:{"@type":"Offer",price:z,priceCurrency:"INR",availability:"https://schema.org/InStock",priceValidUntil:new Date((new Date).setDate((new Date).getDate()+1)).toISOString().split("T")[0]}}}}:null,Q=v?{"@context":"https://schema.org","@type":"Product",name:"Eggs in ".concat(v,", ").concat(N),description:"Fresh eggs available in ".concat(v,", ").concat(N,". Check today's egg price."),image:"https://todayeggrates.com/eggpic.webp",offers:{"@type":"Offer",url:"https://todayeggrates.com/".concat(v.toLowerCase(),"-egg-rate"),priceCurrency:"INR",price:z,priceValidUntil:new Date((new Date).setDate((new Date).getDate()+1)).toISOString().split("T")[0],availability:"https://schema.org/InStock",itemCondition:"https://schema.org/NewCondition"},aggregateRating:{"@type":"AggregateRating",ratingValue:"4.8",reviewCount:"254"}}:null;return(0,l.jsxs)(l.Fragment,{children:[v&&(0,l.jsxs)(o.m,{children:[G&&(0,l.jsx)("script",{type:"application/ld+json",children:JSON.stringify(G)}),Q&&(0,l.jsx)("script",{type:"application/ld+json",children:JSON.stringify(Q)})]}),d&&c.length>1&&(0,l.jsx)("div",{className:"mb-6",children:(0,l.jsxs)("div",{className:"p-4 bg-white rounded-lg shadow-lg",children:[(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Last Updated: ",$]}),(0,l.jsxs)("div",{className:"flex justify-between items-center",children:[(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Price Change:",(0,l.jsxs)("span",{className:"ml-1 ".concat(H>=0?"text-green-600":"text-red-600"),children:[H>=0?"+":"",H.toFixed(2)," (",K.toFixed(1),"%)"]})]}),j&&(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["Tray Price (30 eggs): \u20b9",Z.toFixed(2)]})]})]}),(0,l.jsx)(n.A,{rates:c,chartType:p})]})}),(0,l.jsxs)("div",{className:g?"bg-white rounded-lg shadow-lg overflow-x-auto":"bg-gray-100 rounded-lg shadow-lg overflow-x-auto",children:[g&&(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-800 mb-4",children:"Special Rates"}),(0,l.jsx)("p",{className:"text-center text-gray-600 mb-6",children:"Today's wholesale egg rates for special markets and bulk buyers"})]}),(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"min-w-full border border-gray-300 mt-4",role:"table","aria-label":"Egg Rates Table",children:[(0,l.jsx)("thead",{className:"sticky top-0 z-10",children:(0,l.jsxs)("tr",{style:{backgroundColor:"#F9BE0C"},children:[!v&&w&&(0,l.jsx)("th",{className:"border border-gray-300 p-2 cursor-pointer hover:bg-yellow-500 transition-colors duration-200",onClick:()=>U("city"),role:"columnheader","aria-sort":"city"===A.key?A.direction:"none",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:g?"Market Location":"Market"}),(0,l.jsx)("span",{className:"text-xs ml-1",children:_("city")})]})}),x&&(0,l.jsx)("th",{className:"border border-gray-300 p-2 cursor-pointer hover:bg-yellow-500 transition-colors duration-200",onClick:()=>U("state"),role:"columnheader","aria-sort":"state"===A.key?A.direction:"none",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"State"}),(0,l.jsx)("span",{className:"text-xs ml-1",children:_("state")})]})}),f&&(0,l.jsx)("th",{className:"border border-gray-300 p-2 cursor-pointer hover:bg-yellow-500 transition-colors duration-200",onClick:()=>U("date"),role:"columnheader","aria-sort":"date"===A.key?A.direction:"none",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"Date"}),(0,l.jsx)("span",{className:"text-xs ml-1",children:_("date")})]})}),(0,l.jsx)("th",{className:"border border-gray-300 p-2 cursor-pointer hover:bg-yellow-500 transition-colors duration-200",onClick:()=>U("rate"),role:"columnheader","aria-sort":"rate"===A.key?A.direction:"none",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"Rate Per Piece"}),(0,l.jsx)("span",{className:"text-xs ml-1",children:_("rate")})]})}),j&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("th",{className:"border border-gray-300 p-2",role:"columnheader",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"Tray Price (30)"}),(0,l.jsx)("span",{className:"text-xs text-gray-500 ml-1",title:"Calculated value",children:"\ud83d\udcca"})]})}),!g&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("th",{className:"border border-gray-300 p-2",role:"columnheader",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"Price (100 Pcs)"}),(0,l.jsx)("span",{className:"text-xs text-gray-500 ml-1",title:"Calculated value",children:"\ud83d\udcca"})]})}),(0,l.jsx)("th",{className:"border border-gray-300 p-2",role:"columnheader",children:(0,l.jsxs)("div",{className:"flex items-center justify-between",children:[(0,l.jsx)("span",{children:"Peti (210)"}),(0,l.jsx)("span",{className:"text-xs text-gray-500 ml-1",title:"Calculated value",children:"\ud83d\udcca"})]})})]})]}),h&&(0,l.jsx)("th",{className:"border border-gray-300 p-2",role:"columnheader",children:"Actions"})]})}),(0,l.jsx)("tbody",{children:J.map(((e,t)=>(0,l.jsxs)("tr",{className:"\n                    ".concat(t%2===0?"bg-[#fffcdf]":"bg-[#fff1c8]","\n                    transform transition-all duration-200\n                    ").concat(D===t?"scale-[1.01] shadow-lg bg-[#ddfafe]":"","\n                    hover:bg-[#ddfafe] hover:shadow-md\n                  "),onMouseEnter:()=>F(t),onMouseLeave:()=>F(null),role:"row",children:[!v&&w&&(0,l.jsx)("td",{className:"border border-gray-300 p-2",role:"cell",children:e.city?(0,l.jsx)("a",{href:"/".concat(e.city.toLowerCase(),"-egg-rate"),className:"text-blue-600 hover:text-blue-800 transition-colors duration-200 hover:underline",children:e.city}):"N/A"}),x&&(0,l.jsx)("td",{className:"border border-gray-300 p-2",role:"cell",children:e.state}),f&&(0,l.jsx)("td",{className:"border border-gray-300 p-2",role:"cell",children:P===e.id?(0,l.jsx)("input",{type:"date",name:"date",value:O.date,onChange:W,className:"border border-gray-300 p-2 rounded w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Edit date"}):(0,l.jsx)("span",{title:"Last updated: ".concat(e.date),children:e.date})}),(0,l.jsx)("td",{className:"border border-gray-300 p-2",role:"cell",children:P===e.id?(0,l.jsx)("input",{type:"number",name:"rate",value:O.rate,onChange:W,className:"border border-gray-300 p-2 rounded w-full focus:ring-2 focus:ring-blue-500 focus:border-transparent","aria-label":"Edit rate",step:"0.01"}):(0,l.jsxs)("span",{className:"font-medium",children:["\u20b9",parseFloat(e.rate).toFixed(2)]})}),j&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("td",{className:"border border-gray-300 p-2 text-gray-700",role:"cell",children:(0,l.jsxs)("span",{title:"Price for 30 eggs",children:["\u20b9",(30*e.rate).toFixed(2)]})}),!g&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("td",{className:"border border-gray-300 p-2 text-gray-700",role:"cell",children:(0,l.jsxs)("span",{title:"Price for 100 eggs",children:["\u20b9",(100*e.rate).toFixed(2)]})}),(0,l.jsx)("td",{className:"border border-gray-300 p-2 text-gray-700",role:"cell",children:(0,l.jsxs)("span",{title:"Price for 210 eggs",children:["\u20b9",(210*e.rate).toFixed(2)]})})]})]}),h&&(0,l.jsx)("td",{className:"border border-gray-300 p-2 space-x-2",role:"cell",children:P===e.id?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:q,className:"bg-green-500 text-white p-2 rounded hover:bg-green-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-opacity-50","aria-label":"Save changes",children:"Save"}),(0,l.jsx)("button",{onClick:V,className:"bg-gray-500 text-white p-2 rounded hover:bg-gray-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-opacity-50","aria-label":"Cancel editing",children:"Cancel"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>(e=>{R(e.id),T(e)})(e),className:"bg-yellow-500 text-white p-2 rounded hover:bg-yellow-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-opacity-50","aria-label":"Edit ".concat(e.city," rate"),children:"Edit"}),(0,l.jsx)("button",{onClick:()=>m&&m(e),className:"bg-red-500 text-white p-2 rounded hover:bg-red-600 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-opacity-50","aria-label":"Delete ".concat(e.city," rate"),children:"Delete"})]})})]},"".concat(e.city,"-").concat(e.date,"-").concat(t))))})]})}),(0,l.jsxs)("div",{className:"pagination mt-6 flex flex-wrap justify-center items-center gap-2",role:"navigation","aria-label":"Pagination",children:[C>1&&(0,l.jsx)("button",{onClick:()=>k(C-1),className:"px-4 py-2 border rounded bg-white text-blue-500 hover:bg-blue-50 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50","aria-label":"Previous page",children:"\u2190 Previous"}),X.map((e=>{const t=C===e;return Math.abs(C-e)<=2||1===e||e===X.length?(0,l.jsx)("button",{onClick:()=>k(e),className:"px-4 py-2 border rounded transition-all duration-200\n                    ".concat(t?"bg-blue-500 text-white font-medium scale-110":"bg-white text-blue-500 hover:bg-blue-50","\n                    focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50"),"aria-label":"Page ".concat(e),"aria-current":t?"page":void 0,children:e},e):2===e||e===X.length-1?(0,l.jsx)("span",{className:"px-4 py-2",children:"..."},e):null})),C<X.length&&(0,l.jsx)("button",{onClick:()=>k(C+1),className:"px-4 py-2 border rounded bg-white text-blue-500 hover:bg-blue-50 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-opacity-50","aria-label":"Next page",children:"Next \u2192"})]}),d&&(0,l.jsx)(n.A,{data:J,chartType:v?"line":"bar",xAxisKey:v?"date":"city",title:v?"".concat(v," Egg Price Trend"):"Egg Rates by City",showLine:v}),v&&(0,l.jsxs)("div",{className:"mt-8 bg-blue-50 p-4 rounded-lg",children:[(0,l.jsxs)("h3",{className:"text-lg font-medium text-blue-800 mb-2",children:["About ",v," Egg Market"]}),(0,l.jsxs)("p",{className:"text-gray-700 mb-3",children:["The egg market in ",v,", ",N," follows the general poultry market trends in the region. Prices are influenced by factors such as feed costs, seasonal demand, transportation expenses, and overall market conditions."]}),(0,l.jsxs)("p",{className:"text-gray-700",children:[v,"'s egg rates are typically updated daily based on the National Egg Coordination Committee (NECC) publications and local market surveys. Our website provides the most current prices to help consumers and traders make informed decisions."]})]})]})]})}},3102:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(5043),r=a(4672),n=a(3216),o=a(5475),l=a(579);const i=e=>{let{setIsAuthenticated:t}=e;const a=(0,n.Zp)();return(0,l.jsx)("nav",{className:"bg-gray-800 p-4 shadow-lg",children:(0,l.jsxs)("div",{className:"container mx-auto px-4 w-full max-w-7xl flex justify-between items-center transition-none",children:[(0,l.jsx)("div",{children:(0,l.jsx)(o.N_,{to:"/admin",className:"text-white text-2xl font-bold",children:"Admin Dashboard"})}),(0,l.jsx)("div",{className:"flex space-x-4",children:(0,l.jsx)("button",{onClick:()=>{t(!1),a("/login")},className:"text-white bg-red-600 hover:bg-red-700 px-4 py-2 rounded transition duration-150 ease-in-out",children:"Logout"})})]})})},c=e=>{let{states:t,selectedState:a,handleStateChange:s}=e;return(0,l.jsx)(r.Ay,{options:t,value:a,onChange:s,className:"w-full mb-4",placeholder:"Select State"})};var d=a(9379);const u=e=>{let{options:t,selectedOptions:a,setSelectedOptions:s}=e;const n=Array.from(new Set(t.map((e=>e.value)))).map((e=>t.find((t=>t.value===e))));return(0,l.jsx)(r.Ay,{isMulti:!0,options:n,value:a,onChange:s,className:"w-full",styles:{control:e=>(0,d.A)((0,d.A)({},e),{},{backgroundColor:"white",borderColor:"transparent",boxShadow:"none","&:hover":{borderColor:"transparent"},padding:"0.5rem",borderRadius:"0.375rem"}),menu:e=>(0,d.A)((0,d.A)({},e),{},{zIndex:9999}),placeholder:e=>(0,d.A)((0,d.A)({},e),{},{color:"#A0AEC0"})},placeholder:"Select Cities, States"})};var h=a(6853);const g=e=>{let{newState:t,setNewState:a,handleAddState:s}=e;return(0,l.jsxs)("form",{onSubmit:s,className:"mb-6 grid grid-cols-1 gap-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"New State",value:t,onChange:e=>a(e.target.value),className:"border border-gray-300 p-3 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500 transition",required:!0}),(0,l.jsx)("button",{type:"submit",className:"bg-blue-600 text-white p-3 rounded w-full hover:bg-blue-700 transition",children:"Add State"})]})},p=e=>{let{states:t,newCity:a,setNewCity:s,newCityState:n,setNewCityState:o,handleAddCity:i}=e;return(0,l.jsxs)("form",{onSubmit:i,className:"mb-6 grid grid-cols-1 gap-4",children:[(0,l.jsx)(r.Ay,{options:t,value:n,onChange:o,className:"w-full mb-4",placeholder:"Select State for New City"}),(0,l.jsx)("input",{type:"text",placeholder:"New City",value:a,onChange:e=>s(e.target.value),className:"border border-gray-300 p-3 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500 transition",required:!0}),(0,l.jsx)("button",{type:"submit",className:"bg-blue-600 text-white p-3 rounded w-full hover:bg-blue-700 transition",children:"Add City"})]})};var m=a(5927);const y=e=>{let{setIsAuthenticated:t}=e;const a=(new Date).toISOString().split("T")[0],[n,o]=(0,s.useState)({date:a,rate:""}),[d,y]=(0,s.useState)([]),[b,x]=(0,s.useState)([]),[f,j]=(0,s.useState)([]),[v,N]=(0,s.useState)(!0),[w,S]=(0,s.useState)(null),[C,k]=(0,s.useState)({key:"city",direction:"ascending"}),[A,E]=(0,s.useState)([]),[P,R]=(0,s.useState)(null),[O,T]=(0,s.useState)(""),[D,F]=(0,s.useState)(""),[_,L]=(0,s.useState)(null),[M,I]=(0,s.useState)(""),[J,X]=(0,s.useState)(null),[U,q]=(0,s.useState)(null),[V,W]=(0,s.useState)(a),z=(0,s.useCallback)((()=>{N(!0),fetch("/php/api/rates/get_all_rates.php?date=".concat(V)).then((e=>e.json())).then((e=>{j(e),N(!1)})).catch((e=>{console.error("Error fetching rates:",e),S(e),N(!1)}))}),[V]),B=(0,s.useCallback)((()=>{fetch("/php/api/location/get_states_and_cities.php").then((e=>e.json())).then((e=>{const t=[],a=[];for(const s in e)a.push({value:s,label:s}),t.push({value:s,label:s,type:"state"}),e[s].forEach((e=>{t.push({value:"".concat(e,"-").concat(s),label:"".concat(e,", ").concat(s),type:"city"})}));x(t),E(a)})).catch((e=>console.error("Error fetching states and cities:",e)))}),[]);(0,s.useEffect)((()=>{z()}),[z]),(0,s.useEffect)((()=>{B()}),[B]);const H=s.useMemo((()=>{let e=[...f];return e.sort(((e,t)=>e[C.key]<t[C.key]?"ascending"===C.direction?-1:1:e[C.key]>t[C.key]?"ascending"===C.direction?1:-1:0)),e}),[f,C]),K=()=>{o({date:a,rate:""}),y([]),R(null),I(""),X(null),q(null),T(""),F(""),L(null)};return v?(0,l.jsx)("div",{children:"Loading..."}):w?(0,l.jsxs)("div",{children:["Error loading data: ",w.message]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i,{setIsAuthenticated:t}),(0,l.jsx)("div",{className:"p-6 bg-gray-100 min-h-screen",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-md",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6 text-center text-blue-600",children:"Admin Egg Rate Management"}),(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)(c,{states:A,selectedState:P,handleStateChange:e=>{R(e),y([]);const t=b.filter((t=>"city"===t.type&&t.label.includes(e.value)));y(t)}}),(0,l.jsx)(u,{options:b,selectedOptions:d,setSelectedOptions:y}),(0,l.jsx)(h.default,{eggRate:n,setEggRate:o,handleSubmit:e=>{e.preventDefault();const t=d.map((e=>{const[t,a]="city"===e.type?e.label.split(", "):[null,e.value];return{city:t,state:a||"",date:n.date,rate:n.rate,type:e.type}}));fetch("/php/api/rates/update_multiple_rates.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>{z(),K()})).catch((e=>console.error("Error submitting data:",e)))},handleSelectAll:()=>{const e=b.filter((e=>"city"===e.type));y(e)},handleCopyPreviousRates:()=>{if(0===d.length)return void alert("Please select at least one city.");(async()=>{const e=d.filter((e=>"city"===e.type)).map((e=>{const[t,a]=e.label.split(", ");return{city:t,state:a}}));console.log("Selected cities for updating rates:",e);const t=await(async e=>{console.log("Fetching latest rates for cities:",e);const t=await fetch("/php/api/rates/get_latest_rates.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),a=await t.json();return console.log("Fetched latest rates:",a),a})(e),a=t.map((e=>({city:e.city,state:e.state,date:n.date,rate:e.rate||n.rate,type:"city"})));console.log("Payload for updating rates:",a),fetch("/php/api/rates/update_multiple_rates.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((e=>e.json())).then((e=>{console.log("Response from updating rates:",e),z(),K()})).catch((e=>console.error("Error submitting data:",e)))})()}}),(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-blue-600",children:"Add New State"}),(0,l.jsx)(g,{newState:O,setNewState:T,handleAddState:e=>{e.preventDefault(),fetch("/php/api/location/add_state_city.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"state",name:O})}).then((e=>e.json())).then((e=>{e.success?(B(),T("")):alert(e.error)})).catch((e=>console.error("Error adding state:",e)))}}),(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-blue-600",children:"Add New City"}),(0,l.jsx)(p,{states:A,newCity:D,setNewCity:F,newCityState:_,setNewCityState:L,handleAddCity:e=>{e.preventDefault(),fetch("/php/api/location/add_state_city.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"city",name:D,state:_.value})}).then((e=>e.json())).then((e=>{e.success?(B(),F(""),L(null)):alert(e.error)})).catch((e=>console.error("Error adding city:",e)))}}),(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-blue-600",children:"Remove State"}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),fetch("/php/api/location/remove_state_city.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"state",name:M})}).then((e=>e.json())).then((e=>{e.success?(B(),I("")):alert(e.error)})).catch((e=>console.error("Error removing state:",e)))},className:"mb-6 grid grid-cols-1 gap-4",children:[(0,l.jsx)(r.Ay,{options:A,value:A.find((e=>e.value===M)),onChange:e=>I(e.value),className:"w-full mb-4",placeholder:"Select State to Remove"}),(0,l.jsx)("button",{type:"submit",className:"bg-red-600 text-white p-3 rounded w-full hover:bg-red-700 transition",children:"Remove State"})]}),(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-blue-600",children:"Remove City"}),(0,l.jsxs)("form",{onSubmit:e=>{e.preventDefault(),fetch("/php/api/location/remove_state_city.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({type:"city",name:J.label.split(", ")[0],state:U.value})}).then((e=>e.json())).then((e=>{e.success?(B(),X(null),q(null)):alert(e.error)})).catch((e=>console.error("Error removing city:",e)))},className:"mb-6 grid grid-cols-1 gap-4",children:[(0,l.jsx)(r.Ay,{options:A,value:A.find((e=>e.value===(null===U||void 0===U?void 0:U.value))),onChange:q,className:"w-full mb-4",placeholder:"Select State for City to Remove"}),(0,l.jsx)(r.Ay,{options:b.filter((e=>"city"===e.type&&e.label.includes(null===U||void 0===U?void 0:U.value))),value:J,onChange:X,className:"w-full mb-4",placeholder:"Select City to Remove"}),(0,l.jsx)("button",{type:"submit",className:"bg-red-600 text-white p-3 rounded w-full hover:bg-red-700 transition",children:"Remove City"})]}),(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-4 text-blue-600",children:"Current Egg Rates"}),(0,l.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"date",children:"Select Date"}),(0,l.jsx)("input",{type:"date",id:"date",value:V,onChange:e=>W(e.target.value),className:"border border-gray-300 p-3 rounded w-full focus:outline-none focus:ring-2 focus:ring-blue-500 transition"})]}),"          ",(0,l.jsx)(m.default,{rates:H,showAdmin:!0,showState:!0,showDate:!0,showChart:!1,showPriceColumns:!1,handleSort:e=>{let t="ascending";C.key===e&&"ascending"===C.direction&&(t="descending"),k({key:e,direction:t})},onEdit:e=>{const t=f.map((t=>t.id===e.id?e:t));j(t),fetch("/php/api/rates/update_rate.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{e.success?z():console.error("Error updating rate:",e.error)})).catch((e=>console.error("Error updating rate:",e)))},onDelete:e=>{fetch("/php/api/rates/delete_rate.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then((e=>e.json())).then((e=>{z()})).catch((e=>console.error("Error deleting item:",e)))}})]})})]})}}}]);
//# sourceMappingURL=admin-page.fb873e81.chunk.js.map